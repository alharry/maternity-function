---
title: "Quantifying maternal reproductive output of chondrichthyan fishes"
format: gfm
---

Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.

## Example

Load data for sandbar shark maternity data set. Rows are data from individuals sharks x is fork length (cm) and z is maternal status (0 = non maternal, 1 = maternal).

```{r message=FALSE, warning=FALSE}
library(tidyverse)

data <- read_rds(here::here("data", "empirical-plumbeus.Rds"))
```

## Bin data into suitable length categories for plotting

```{r message=FALSE, warning=FALSE}
brks = seq(40, 220, 7.5)
data_binned <- data %>%
  mutate(x_bin = findInterval(x, brks)) %>% 
  mutate(x_bin = (brks[x_bin] + brks[x_bin + 1]) / 2) %>% 
  group_by(x_bin) %>%
  summarise(p = sum(z)/ n())
```

Compile 3 parameter logistic model

```{r message=FALSE, warning=FALSE}
library(TMB)
compile("code/logistic3.cpp")
dyn.load(dynlib("code/logistic3"))
```
